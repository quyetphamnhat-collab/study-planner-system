<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng L·∫≠p K·∫ø Ho·∫°ch H·ªçc T·∫≠p Khoa H·ªçc</title>
    <!-- Th√™m favicon -->
    <link rel="icon" type="image/png" href="bi·ªÉu%20t∆∞·ª£ng%20trang%20web.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset v√† bi·∫øn CSS */
        :root {
            --primary-color: #ff3366;
            --secondary-color: #cc0044;
            --accent-color: #ff6699;
            --success-color: #4cc9f0;
            --warning-color: #f8961e;
            --danger-color: #ef476f;
            --light-bg: #fff5f7;
            --dark-bg: #2c0b16;
            --text-color: #333;
            --text-light: #666;
            --border-color: #ffd6e0;
            --shadow: 0 5px 15px rgba(255, 51, 102, 0.1);
            --gradient-bg: linear-gradient(135deg, #ffffff 0%, #fff5f7 50%, #ffe6ec 100%);
            --header-gradient: linear-gradient(135deg, #ff3366 0%, #cc0044 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease, box-shadow 0.3s ease;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            background: var(--gradient-bg);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-color);
            line-height: 1.6;
        }
        
        /* Container ch√≠nh */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(255, 51, 102, 0.15);
            overflow: hidden;
            border: 1px solid var(--border-color);
            animation: pageLoad 0.6s ease-out;
        }
        
        @keyframes pageLoad {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Header */
        .header {
            background: var(--header-gradient);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
        }
        
        .header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto 20px;
        }
        
        /* Stats */
        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 15px 25px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        /* Main layout */
        .main-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            min-height: 800px;
        }
        
        /* Sidebar */
        .sidebar {
            background: var(--light-bg);
            padding: 25px;
            border-right: 1px solid var(--border-color);
        }
        
        /* User Profile */
        .user-profile {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .avatar-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            transition: all 0.3s ease;
        }
        
        .avatar-container:hover {
            transform: scale(1.05) rotate(5deg);
        }
        
        .avatar-container:hover .avatar-overlay {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .avatar {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid white;
            box-shadow: var(--shadow);
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(255, 51, 102, 0.3);
        }
        
        .avatar-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .avatar-input {
            display: none;
        }
        
        .user-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary-color);
        }
        
        .user-id {
            background: var(--secondary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            font-size: 0.9em;
            margin: 10px 0;
        }
        
        /* Navigation */
        .nav-menu {
            list-style: none;
            margin-bottom: 30px;
        }
        
        .nav-menu li {
            margin-bottom: 10px;
        }
        
        .nav-menu a {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            text-decoration: none;
            color: var(--text-color);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            box-shadow: 0 3px 8px rgba(255, 51, 102, 0.05);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }
        
        .nav-menu a::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }
        
        .nav-menu a:hover::before {
            width: 100%;
        }
        
        .nav-menu a:hover, .nav-menu a.active {
            background: var(--primary-color);
            color: white;
            transform: translateX(5px);
        }
        
        .nav-icon {
            margin-right: 12px;
            font-size: 1.2em;
            width: 25px;
            text-align: center;
        }
        
        /* Quick Stats */
        .quick-stats {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(255, 51, 102, 0.05);
            border: 1px solid var(--border-color);
        }
        
        .quick-stats h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        /* Main content */
        .main-content {
            padding: 30px;
            background: white;
        }
        
        .section-title {
            color: var(--primary-color);
            font-size: 1.8em;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 30px;
        }
        
        .tab {
            padding: 15px 30px;
            cursor: pointer;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab:hover {
            background: var(--light-bg);
            transform: translateY(-2px);
        }
        
        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        /* Tab content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeInUp 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Forms */
        .form-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-control:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 51, 102, 0.1);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 51, 102, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        /* Priority selector */
        .priority-selector {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .priority-option {
            flex: 1;
            min-width: 120px;
        }
        
        .priority-option input[type="radio"] {
            display: none;
        }
        
        .priority-option label {
            display: block;
            padding: 15px;
            background: var(--light-bg);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .priority-option input[type="radio"]:checked + label {
            border-color: var(--primary-color);
            background: rgba(255, 51, 102, 0.1);
            font-weight: bold;
        }
        
        .priority-high label { color: var(--danger-color); }
        .priority-medium label { color: var(--warning-color); }
        .priority-low label { color: var(--success-color); }
        
        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            20% {
                transform: scale(25, 25);
                opacity: 0.3;
            }
            100% {
                opacity: 0;
                transform: scale(40, 40);
            }
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 51, 102, 0.2);
        }
        
        .btn:active {
            transform: translateY(-1px);
            box-shadow: 0 5px 10px rgba(255, 51, 102, 0.2);
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--secondary-color);
        }
        
        .btn-secondary {
            background: #ff99b8;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #ff6699;
        }
        
        .btn-group {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 25px;
            border-top: 2px solid var(--border-color);
        }
        
        /* Study Plan Table */
        .study-plan-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }
        
        .study-plan-table th {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        .study-plan-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .study-plan-table tr {
            transition: all 0.3s ease;
        }
        
        .study-plan-table tr:hover {
            background: var(--light-bg);
            transform: translateX(5px);
        }
        
        .priority-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .priority-high-badge {
            background: rgba(239, 71, 111, 0.2);
            color: var(--danger-color);
        }
        
        .priority-medium-badge {
            background: rgba(248, 150, 30, 0.2);
            color: var(--warning-color);
        }
        
        .priority-low-badge {
            background: rgba(76, 201, 240, 0.2);
            color: var(--success-color);
        }
        
        /* Progress tracker */
        .progress-tracker {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-top: 30px;
            border: 1px solid var(--border-color);
        }
        
        .progress-item {
            margin-bottom: 20px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .progress-bar {
            height: 20px;
            background: #ffe6ec;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            transition: width 1s ease;
        }
        
        /* Calendar */
        .calendar {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-top: 30px;
            border: 1px solid var(--border-color);
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }
        
        .calendar-day {
            padding: 15px;
            text-align: center;
            border-radius: 8px;
            background: var(--light-bg);
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .calendar-date {
            padding: 15px;
            text-align: center;
            border-radius: 8px;
            background: white;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .calendar-date:hover {
            background: var(--light-bg);
            transform: scale(1.05);
        }
        
        .calendar-date.has-study {
            background: rgba(255, 51, 102, 0.1);
            border-color: var(--primary-color);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 25px;
            background: var(--dark-bg);
            color: white;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: #ff99b8;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }
            
            .header h1 {
                font-size: 2.2em;
            }
        }
        
        @media (max-width: 768px) {
            .stats {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                text-align: center;
                border-bottom: 1px solid var(--border-color);
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        /* Message */
        .message {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }
        
        .message.success {
            background: rgba(46, 204, 113, 0.2);
            color: #27ae60;
            border: 1px solid #2ecc71;
        }
        
        .message.error {
            background: rgba(231, 76, 60, 0.2);
            color: #c0392b;
            border: 1px solid #e74c3c;
        }
        
        /* Study Tips */
        .study-tips {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .study-tips h3 {
            margin-bottom: 15px;
        }
        
        .study-tips ul {
            margin-left: 20px;
        }
        
        .study-tips li {
            margin-bottom: 10px;
        }
        
        /* Custom CSS for subject management */
        .subject-manager {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        @media (max-width: 1024px) {
            .subject-manager {
                grid-template-columns: 1fr;
            }
        }
        
        .subject-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }
        
        .subject-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .subject-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 10px;
            background: var(--light-bg);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1);
        }
        
        .subject-item:hover {
            background: #ffe6ec;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(255, 51, 102, 0.15);
        }
        
        .subject-info h4 {
            margin-bottom: 5px;
            color: var(--text-color);
        }
        
        .subject-info p {
            color: var(--text-light);
            font-size: 0.9em;
        }
        
        .subject-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.85em;
        }
        
        .subject-form {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }
        
        /* Color picker for subjects */
        .color-picker {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
        }
        
        .color-option.selected {
            border-color: var(--dark-bg);
        }
        
        /* Quick add subject in study plan */
        .subject-select-wrapper {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .quick-add-btn {
            padding: 10px;
            border-radius: 8px;
            background: var(--light-bg);
            color: var(--primary-color);
            border: 1px dashed var(--primary-color);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quick-add-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        /* Background patterns */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.1;
        }
        
        .bg-pattern-1 {
            background-image: radial-gradient(circle at 10% 20%, rgba(255, 51, 102, 0.2) 0%, transparent 20%),
                              radial-gradient(circle at 90% 80%, rgba(255, 102, 153, 0.2) 0%, transparent 20%),
                              radial-gradient(circle at 50% 50%, rgba(204, 0, 68, 0.1) 0%, transparent 30%);
        }
        
        /* Ripple animation */
        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* Loading animation */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Background Pattern -->
    <div class="bg-pattern bg-pattern-1"></div>
    
    <!-- Loading Screen -->
    <div id="loading" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--gradient-bg); display: flex; align-items: center; justify-content: center; z-index: 9999; transition: opacity 0.5s ease;">
        <div style="text-align: center;">
            <div style="width: 60px; height: 60px; border: 5px solid var(--border-color); border-top-color: var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
            <p style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">ƒêang t·∫£i h·ªá th·ªëng...</p>
        </div>
    </div>
    
    <!-- Modal xem ·∫£nh l·ªõn -->
    <div id="avatarViewModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center;">
        <div style="position: relative; max-width: 90%; max-height: 90%;">
            <img id="avatarLarge" src="" style="max-width: 100%; max-height: 90vh; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
            <button class="btn btn-primary" onclick="closeAvatarView()" style="position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.7); color: white; border: 2px solid white; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-times"></i>
            </button>
            <div style="position: absolute; bottom: 20px; left: 0; right: 0; text-align: center;">
                <button class="btn btn-primary" onclick="changeAvatar()" style="margin-right: 10px;">
                    <i class="fas fa-camera"></i> ƒê·ªïi ·∫£nh
                </button>
                <button class="btn btn-secondary" onclick="closeAvatarView()">
                    <i class="fas fa-times"></i> ƒê√≥ng
                </button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>üìö H·ªá Th·ªëng L·∫≠p K·∫ø Ho·∫°ch H·ªçc T·∫≠p Khoa H·ªçc</h1>
                <p>T·ªëi ∆∞u h√≥a th·ªùi gian h·ªçc t·∫≠p - ∆Øu ti√™n vi·ªác h·ªçc - ƒê·∫°t m·ª•c ti√™u h·ªçc t·∫≠p</p>
                <div id="motivational-quote" style="font-style: italic; margin-top: 15px; padding: 10px 20px; background: rgba(255,255,255,0.2); border-radius: 10px; backdrop-filter: blur(5px); border-left: 4px solid rgba(255,255,255,0.5); animation: fadeIn 1s ease;"></div>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="total-study-hours">0</div>
                        <div class="stat-label">Gi·ªù h·ªçc ƒë√£ l√™n k·∫ø ho·∫°ch</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="completed-tasks">0</div>
                        <div class="stat-label">Nhi·ªám v·ª• ƒë√£ ho√†n th√†nh</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="study-efficiency">0%</div>
                        <div class="stat-label">Hi·ªáu su·∫•t h·ªçc t·∫≠p</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Sidebar -->
            <div class="sidebar">
                <!-- User Profile -->
                <div class="user-profile">
                    <div class="avatar-container">
                        <div class="avatar" id="user-avatar" onclick="viewAvatar()">
                            <!-- Avatar content will be set by JavaScript -->
                        </div>
                        <div class="avatar-overlay" onclick="changeAvatar()">
                            <i class="fas fa-camera"></i>
                        </div>
                        <input type="file" id="avatar-input" class="avatar-input" accept="image/*">
                    </div>
                    <div class="user-name" id="user-name">Sinh Vi√™n</div>
                    <div class="user-id" id="user-id">ID: STU-001</div>
                    <p>Chuy√™n ng√†nh: <span id="user-major">Ch∆∞a c·∫≠p nh·∫≠t</span></p>
                </div>
                
                <!-- Navigation Menu -->
                <ul class="nav-menu">
                    <li><a href="#" class="active" data-tab="profile">
                        <span class="nav-icon"><i class="fas fa-user"></i></span>
                        <span>Th√¥ng tin c√° nh√¢n</span>
                    </a></li>
                    <li><a href="#" data-tab="study-plan">
                        <span class="nav-icon"><i class="fas fa-calendar-alt"></i></span>
                        <span>K·∫ø ho·∫°ch h·ªçc t·∫≠p</span>
                    </a></li>
                    <li><a href="#" data-tab="subjects">
                        <span class="nav-icon"><i class="fas fa-book"></i></span>
                        <span>M√¥n h·ªçc</span>
                    </a></li>
                    <li><a href="#" data-tab="progress">
                        <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
                        <span>Theo d√µi ti·∫øn ƒë·ªô</span>
                    </a></li>
                    <li><a href="#" data-tab="calendar">
                        <span class="nav-icon"><i class="fas fa-calendar-day"></i></span>
                        <span>L·ªãch h·ªçc</span>
                    </a></li>
                </ul>
                
                <!-- Quick Stats -->
                <div class="quick-stats">
                    <h3>üìä Th·ªëng k√™ nhanh</h3>
                    <p><i class="fas fa-clock"></i> H√¥m nay: <span id="today-study">0</span> gi·ªù</p>
                    <p><i class="fas fa-tasks"></i> Nhi·ªám v·ª•: <span id="pending-tasks">0</span> c√≤n l·∫°i</p>
                    <p><i class="fas fa-fire"></i> Ng√†y h·ªçc li√™n ti·∫øp: <span id="streak-days">0</span></p>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="main-content">
                <!-- Tabs Navigation -->
                <div class="tabs">
                    <div class="tab active" data-tab="profile">Th√¥ng tin c√° nh√¢n</div>
                    <div class="tab" data-tab="study-plan">K·∫ø ho·∫°ch h·ªçc t·∫≠p</div>
                    <div class="tab" data-tab="subjects">Qu·∫£n l√Ω m√¥n h·ªçc</div>
                    <div class="tab" data-tab="progress">Theo d√µi ti·∫øn ƒë·ªô</div>
                    <div class="tab" data-tab="calendar">L·ªãch h·ªçc</div>
                </div>
                
                <!-- Message Area -->
                <div class="message" id="message"></div>
                
                <!-- Tab Contents -->
                
                <!-- Profile Tab -->
                <div class="tab-content active" id="profile-tab">
                    <h2 class="section-title">üë§ Th√¥ng tin c√° nh√¢n</h2>
                    
                    <div class="form-container">
                        <div class="form-group">
                            <label for="fullName">H·ªç v√† t√™n *</label>
                            <input type="text" id="fullName" class="form-control" placeholder="Nh·∫≠p h·ªç v√† t√™n ƒë·∫ßy ƒë·ªß">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="studentId">M√£ sinh vi√™n</label>
                                <input type="text" id="studentId" class="form-control" placeholder="SV20240001">
                            </div>
                            <div class="form-group">
                                <label for="major">Chuy√™n ng√†nh</label>
                                <select id="major" class="form-control">
                                    <option value="">Ch·ªçn chuy√™n ng√†nh</option>
                                    <option value="cntt">C√¥ng ngh·ªá th√¥ng tin</option>
                                    <option value="kt">Kinh t·∫ø</option>
                                    <option value="y">Y h·ªçc</option>
                                    <option value="luat">Lu·∫≠t</option>
                                    <option value="khac">Kh√°c</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" id="email" class="form-control" placeholder="email@example.com">
                            </div>
                            <div class="form-group">
                                <label for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
                                <input type="tel" id="phone" class="form-control" placeholder="0123 456 789">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="studyGoals">M·ª•c ti√™u h·ªçc t·∫≠p</label>
                            <textarea id="studyGoals" class="form-control" rows="4" placeholder="M√¥ t·∫£ m·ª•c ti√™u h·ªçc t·∫≠p c·ªßa b·∫°n..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>M·ª©c ƒë·ªô ∆∞u ti√™n h·ªçc t·∫≠p</label>
                            <div class="priority-selector">
                                <div class="priority-option priority-high">
                                    <input type="radio" id="priority-high" name="studyPriority" value="high">
                                    <label for="priority-high">Cao nh·∫•t</label>
                                </div>
                                <div class="priority-option priority-medium">
                                    <input type="radio" id="priority-medium" name="studyPriority" value="medium" checked>
                                    <label for="priority-medium">Trung b√¨nh</label>
                                </div>
                                <div class="priority-option priority-low">
                                    <input type="radio" id="priority-low" name="studyPriority" value="low">
                                    <label for="priority-low">Th·∫•p</label>
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" onclick="saveProfile()" id="save-profile-btn">
                            <i class="fas fa-save"></i> L∆∞u th√¥ng tin
                        </button>
                    </div>
                </div>
                
                <!-- Study Plan Tab -->
                <div class="tab-content" id="study-plan-tab">
                    <h2 class="section-title">üìÖ T·∫°o k·∫ø ho·∫°ch h·ªçc t·∫≠p</h2>
                    
                    <div class="form-container">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="subjectSelect">M√¥n h·ªçc *</label>
                                <div class="subject-select-wrapper">
                                    <select id="subjectSelect" class="form-control">
                                        <option value="">Ch·ªçn m√¥n h·ªçc</option>
                                    </select>
                                    <button class="quick-add-btn" onclick="showQuickAddSubject()" title="Th√™m m√¥n h·ªçc nhanh">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="studyDate">Ng√†y h·ªçc *</label>
                                <input type="date" id="studyDate" class="form-control">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="startTime">Th·ªùi gian b·∫Øt ƒë·∫ßu *</label>
                                <input type="time" id="startTime" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="endTime">Th·ªùi gian k·∫øt th√∫c *</label>
                                <input type="time" id="endTime" class="form-control">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="studyTopic">Ch·ªß ƒë·ªÅ/N·ªôi dung h·ªçc</label>
                            <input type="text" id="studyTopic" class="form-control" placeholder="V√≠ d·ª•: Ch∆∞∆°ng 3 - ƒê·∫°o h√†m">
                        </div>
                        
                        <div class="form-group">
                            <label>M·ª©c ƒë·ªô ∆∞u ti√™n</label>
                            <div class="priority-selector">
                                <div class="priority-option priority-high">
                                    <input type="radio" id="plan-priority-high" name="planPriority" value="high">
                                    <label for="plan-priority-high">Cao</label>
                                </div>
                                <div class="priority-option priority-medium">
                                    <input type="radio" id="plan-priority-medium" name="planPriority" value="medium" checked>
                                    <label for="plan-priority-medium">Trung b√¨nh</label>
                                </div>
                                <div class="priority-option priority-low">
                                    <input type="radio" id="plan-priority-low" name="planPriority" value="low">
                                    <label for="plan-priority-low">Th·∫•p</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="studyNotes">Ghi ch√∫</label>
                            <textarea id="studyNotes" class="form-control" rows="3" placeholder="Ghi ch√∫ v·ªÅ bu·ªïi h·ªçc..."></textarea>
                        </div>
                        
                        <button class="btn btn-primary" onclick="addStudyPlan()">
                            <i class="fas fa-plus"></i> Th√™m v√†o k·∫ø ho·∫°ch
                        </button>
                    </div>
                    
                    <!-- Current Study Plans -->
                    <div style="margin-top: 50px;">
                        <h3 class="section-title">K·∫ø ho·∫°ch h·ªçc t·∫≠p hi·ªán t·∫°i</h3>
                        <table class="study-plan-table">
                            <thead>
                                <tr>
                                    <th>M√¥n h·ªçc</th>
                                    <th>Ng√†y</th>
                                    <th>Th·ªùi gian</th>
                                    <th>N·ªôi dung</th>
                                    <th>∆Øu ti√™n</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                            </thead>
                            <tbody id="study-plan-list">
                                <!-- Plans will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Subjects Tab -->
                <div class="tab-content" id="subjects-tab">
                    <h2 class="section-title">üìö Qu·∫£n l√Ω m√¥n h·ªçc</h2>
                    
                    <div class="subject-manager">
                        <!-- Current Subjects List -->
                        <div class="subject-card">
                            <h3>Danh s√°ch m√¥n h·ªçc c·ªßa b·∫°n</h3>
                            <div id="subjects-container">
                                <!-- Subjects will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Add/Edit Subject Form -->
                        <div class="subject-form">
                            <h3 id="subject-form-title">Th√™m m√¥n h·ªçc m·ªõi</h3>
                            
                            <div class="form-group">
                                <label for="editSubjectName">T√™n m√¥n h·ªçc *</label>
                                <input type="text" id="editSubjectName" class="form-control" placeholder="V√≠ d·ª•: To√°n cao c·∫•p">
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="editSubjectCode">M√£ m√¥n h·ªçc</label>
                                    <input type="text" id="editSubjectCode" class="form-control" placeholder="MATH101">
                                </div>
                                <div class="form-group">
                                    <label for="editSubjectCredits">S·ªë t√≠n ch·ªâ</label>
                                    <input type="number" id="editSubjectCredits" class="form-control" min="1" max="10" value="3">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="editSubjectDifficulty">ƒê·ªô kh√≥</label>
                                    <select id="editSubjectDifficulty" class="form-control">
                                        <option value="easy">D·ªÖ</option>
                                        <option value="medium" selected>Trung b√¨nh</option>
                                        <option value="hard">Kh√≥</option>
                                        <option value="very-hard">R·∫•t kh√≥</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="editSubjectColor">M√†u s·∫Øc m√¥n h·ªçc</label>
                                    <div class="color-picker">
                                        <div class="color-option" style="background-color: #ff3366;" data-color="#ff3366"></div>
                                        <div class="color-option" style="background-color: #cc0044;" data-color="#cc0044"></div>
                                        <div class="color-option" style="background-color: #ff6699;" data-color="#ff6699"></div>
                                        <div class="color-option" style="background-color: #ff99b8;" data-color="#ff99b8"></div>
                                        <div class="color-option" style="background-color: #f8961e;" data-color="#f8961e"></div>
                                        <div class="color-option" style="background-color: #4cc9f0;" data-color="#4cc9f0"></div>
                                    </div>
                                    <input type="hidden" id="editSubjectColor" value="#ff3366">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="editSubjectDescription">M√¥ t·∫£ m√¥n h·ªçc</label>
                                <textarea id="editSubjectDescription" class="form-control" rows="3" placeholder="M√¥ t·∫£ ng·∫Øn v·ªÅ m√¥n h·ªçc..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="editSubjectTeacher">Gi·∫£ng vi√™n</label>
                                <input type="text" id="editSubjectTeacher" class="form-control" placeholder="T√™n gi·∫£ng vi√™n">
                            </div>
                            
                            <div class="form-group">
                                <label for="editSubjectSchedule">L·ªãch h·ªçc (n·∫øu c√≥)</label>
                                <input type="text" id="editSubjectSchedule" class="form-control" placeholder="V√≠ d·ª•: T2, T4, T6 t·ª´ 8-10h">
                            </div>
                            
                            <div class="btn-group">
                                <button class="btn btn-secondary" onclick="resetSubjectForm()">
                                    <i class="fas fa-times"></i> H·ªßy
                                </button>
                                <button class="btn btn-primary" onclick="saveSubject()">
                                    <i class="fas fa-save"></i> L∆∞u m√¥n h·ªçc
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Subjects Stats -->
                    <div class="quick-stats" style="margin-top: 30px;">
                        <h3>üìä Th·ªëng k√™ m√¥n h·ªçc</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <p>T·ªïng s·ªë m√¥n h·ªçc: <span id="total-subjects">0</span></p>
                            </div>
                            <div class="form-group">
                                <p>T·ªïng s·ªë t√≠n ch·ªâ: <span id="total-credits">0</span></p>
                            </div>
                            <div class="form-group">
                                <p>M√¥n kh√≥ nh·∫•t: <span id="hardest-subject">Ch∆∞a c√≥</span></p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Progress Tab -->
                <div class="tab-content" id="progress-tab">
                    <h2 class="section-title">üìà Theo d√µi ti·∫øn ƒë·ªô h·ªçc t·∫≠p</h2>
                    
                    <div class="progress-tracker">
                        <h3>Ti·∫øn ƒë·ªô h·ªçc t·∫≠p theo m√¥n</h3>
                        <div id="progress-container">
                            <!-- Progress bars will be added here -->
                        </div>
                    </div>
                    
                    <div class="study-tips">
                        <h3>üí° M·∫πo h·ªçc t·∫≠p khoa h·ªçc</h3>
                        <ul>
                            <li>√Åp d·ª•ng ph∆∞∆°ng ph√°p Pomodoro: 25 ph√∫t h·ªçc - 5 ph√∫t ngh·ªâ</li>
                            <li>∆Øu ti√™n h·ªçc v√†o bu·ªïi s√°ng (6-10h) khi n√£o b·ªô t·ªânh t√°o nh·∫•t</li>
                            <li>√în t·∫≠p ki·∫øn th·ª©c trong v√≤ng 24 gi·ªù sau khi h·ªçc</li>
                            <li>Ng·ªß ƒë·ªß 7-8 ti·∫øng m·ªói ƒë√™m ƒë·ªÉ c·ªßng c·ªë tr√≠ nh·ªõ</li>
                            <li>T·∫≠p th·ªÉ d·ª•c nh·∫π tr∆∞·ªõc khi h·ªçc gi√∫p tƒÉng t·∫≠p trung</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Calendar Tab -->
                <div class="tab-content" id="calendar-tab">
                    <h2 class="section-title">üóìÔ∏è L·ªãch h·ªçc t·∫≠p</h2>
                    
                    <div class="calendar">
                        <div class="calendar-header">
                            <h3 id="current-month">Th√°ng 1, 2024</h3>
                            <div>
                                <button class="btn btn-secondary" onclick="changeMonth(-1)">
                                    <i class="fas fa-chevron-left"></i> Th√°ng tr∆∞·ªõc
                                </button>
                                <button class="btn btn-secondary" onclick="changeMonth(1)" style="margin-left: 10px;">
                                    Th√°ng sau <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="calendar-grid" id="calendar-days">
                            <!-- Calendar will be generated here -->
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; text-align: center;">
                        <p><i class="fas fa-info-circle"></i> Nh·∫•n v√†o ng√†y c√≥ vi·ªÅn m√†u xanh ƒë·ªÉ xem k·∫ø ho·∫°ch h·ªçc t·∫≠p chi ti·∫øt</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <div class="footer-links">
                <a href="#" onclick="showTab('profile')">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</a>
                <a href="#" onclick="showTab('progress')">M·∫πo h·ªçc t·∫≠p</a>
                <a href="#" onclick="exportData()">Xu·∫•t d·ªØ li·ªáu</a>
                <a href="#" onclick="importData()">Nh·∫≠p d·ªØ li·ªáu</a>
                <a href="#" onclick="resetData()">ƒê·∫∑t l·∫°i</a>
            </div>
            <p>H·ªá th·ªëng l·∫≠p k·∫ø ho·∫°ch h·ªçc t·∫≠p khoa h·ªçc ¬© 2024</p>
            <p>D·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ c·ª•c b·ªô tr√™n tr√¨nh duy·ªát c·ªßa b·∫°n</p>
        </div>
    </div>

    <!-- Quick Add Subject Modal -->
    <div id="quickAddModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <h3 style="margin-bottom: 20px; color: var(--primary-color);">Th√™m m√¥n h·ªçc nhanh</h3>
            <div class="form-group">
                <label for="quickSubjectName">T√™n m√¥n h·ªçc *</label>
                <input type="text" id="quickSubjectName" class="form-control" placeholder="V√≠ d·ª•: To√°n cao c·∫•p">
            </div>
            <div class="form-group">
                <label for="quickSubjectCode">M√£ m√¥n h·ªçc (t√πy ch·ªçn)</label>
                                <input type="text" id="quickSubjectCode" class="form-control" placeholder="MATH101">
            </div>
            <div class="btn-group" style="margin-top: 20px;">
                <button class="btn btn-secondary" onclick="hideQuickAddModal()">
                    <i class="fas fa-times"></i> H·ªßy
                </button>
                <button class="btn btn-primary" onclick="addQuickSubject()">
                    <i class="fas fa-plus"></i> Th√™m v√† ch·ªçn
                </button>
            </div>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu l∆∞u tr·ªØ
        let userData = {
            profile: {
                fullName: "",
                studentId: "",
                major: "",
                email: "",
                phone: "",
                studyGoals: "",
                studyPriority: "medium",
                avatar: null
            },
            subjects: [],
            studyPlans: [],
            progress: {},
            settings: {
                lastLogin: null,
                streakDays: 0,
                totalStudyHours: 0
            }
        };
        
        // M·∫£ng c√°c c√¢u n√≥i c·ªï v≈©
        const motivationalQuotes = [
            "H·ªçc t·∫≠p l√† ch√¨a kh√≥a m·ªü c·ª≠a t∆∞∆°ng lai!",
            "Kh√¥ng bao gi·ªù l√† qu√° mu·ªôn ƒë·ªÉ h·ªçc m·ªôt ƒëi·ªÅu g√¨ ƒë√≥ m·ªõi!",
            "H·ªçc, h·ªçc n·ªØa, h·ªçc m√£i!",
            "Th√†nh c√¥ng b·∫Øt ƒë·∫ßu t·ª´ s·ª± chƒÉm ch·ªâ!",
            "H√¥m nay h·ªçc t·∫≠p, ng√†y mai th√†nh c√¥ng!",
            "Ki·∫øn th·ª©c l√† s·ª©c m·∫°nh!",
            "H√£y h·ªçc nh∆∞ th·ªÉ b·∫°n s·∫Ω s·ªëng m√£i m√£i!",
            "ƒê·∫ßu t∆∞ v√†o ki·∫øn th·ª©c lu√¥n mang l·∫°i l·ª£i √≠ch t·ªët nh·∫•t!",
            "H·ªçc t·∫≠p l√† h√†nh tr√¨nh su·ªët ƒë·ªùi!",
            "M·ªói ng√†y h·ªçc m·ªôt ƒëi·ªÅu m·ªõi l√† m·ªôt ng√†y c√≥ √≠ch!",
            "Th·∫•t b·∫°i l√† c∆° h·ªôi ƒë·ªÉ b·∫Øt ƒë·∫ßu l·∫°i m·ªôt c√°ch th√¥ng minh h∆°n!",
            "ƒê·ª´ng s·ª£ th·∫•t b·∫°i, h√£y s·ª£ vi·ªác kh√¥ng d√°m th·ª≠!",
            "Ki√™n nh·∫´n v√† ki√™n tr√¨ s·∫Ω chi·∫øn th·∫Øng t·∫•t c·∫£!",
            "H·ªçc t·ª´ ng√†y h√¥m qua, s·ªëng cho ng√†y h√¥m nay, hy v·ªçng cho ng√†y mai!"
        ];
        
        // Bi·∫øn global
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let editingSubjectId = null;
        
        // Kh·ªüi t·∫°o
        document.addEventListener('DOMContentLoaded', function() {
            // ·∫®n loading sau 1 gi√¢y
            setTimeout(() => {
                const loading = document.getElementById('loading');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                }, 500);
            }, 1000);
            
            loadData();
            updateUI();
            generateCalendar();
            setupEventListeners();
            setupColorPicker();
            setupAvatarUpload();
            setupRippleEffects();
            showRandomMotivationalQuote();
            
            // Set ng√†y m·∫∑c ƒë·ªãnh cho form
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            document.getElementById('studyDate').valueAsDate = tomorrow;
            document.getElementById('startTime').value = "08:00";
            document.getElementById('endTime').value = "10:00";
        });
        
        // Setup event listeners
        function setupEventListeners() {
            // Tab navigation
            document.querySelectorAll('.tab, .nav-menu a').forEach(element => {
                element.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tab = this.dataset.tab;
                    showTab(tab);
                    
                    // Th√™m hi·ªáu ·ª©ng click cho tab
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });
            
            // Auto-save profile on change
            document.querySelectorAll('#profile-tab input, #profile-tab select, #profile-tab textarea').forEach(element => {
                element.addEventListener('change', function() {
                    saveProfile();
                });
            });
        }
        
        // Setup ripple effects cho t·∫•t c·∫£ c√°c n√∫t
        function setupRippleEffects() {
            document.addEventListener('click', function(e) {
                const btn = e.target.closest('.btn');
                if (btn && !btn.classList.contains('no-ripple')) {
                    const rect = btn.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size/2;
                    const y = e.clientY - rect.top - size/2;
                    
                    const ripple = document.createElement('span');
                    ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: rgba(255, 255, 255, 0.7);
                        transform: scale(0);
                        animation: ripple-animation 0.6s linear;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        pointer-events: none;
                    `;
                    
                    btn.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                }
            });
        }
        
        // Hi·ªÉn th·ªã c√¢u n√≥i c·ªï v≈© ng·∫´u nhi√™n
        function showRandomMotivationalQuote() {
            const randomIndex = Math.floor(Math.random() * motivationalQuotes.length);
            const quote = motivationalQuotes[randomIndex];
            document.getElementById('motivational-quote').textContent = `"${quote}"`;
        }
        
        // Setup avatar upload
        function setupAvatarUpload() {
            const avatarInput = document.getElementById('avatar-input');
            avatarInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 5 * 1024 * 1024) { // 5MB limit
                        showMessage("K√≠ch th∆∞·ªõc ·∫£nh qu√° l·ªõn. Vui l√≤ng ch·ªçn ·∫£nh nh·ªè h∆°n 5MB.", "error");
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        userData.profile.avatar = event.target.result;
                        updateAvatar();
                        saveData();
                        showMessage("ƒê√£ c·∫≠p nh·∫≠t ·∫£nh ƒë·∫°i di·ªán th√†nh c√¥ng!", "success");
                    };
                    reader.readAsDataURL(file);
                }
            });
        }
        
        // Update avatar display
        function updateAvatar() {
            const avatarEl = document.getElementById('user-avatar');
            
            if (userData.profile.avatar) {
                // Hi·ªÉn th·ªã ·∫£nh t·ª´ base64
                avatarEl.innerHTML = '';
                avatarEl.style.backgroundImage = `url('${userData.profile.avatar}')`;
                avatarEl.style.backgroundSize = 'cover';
                avatarEl.style.backgroundPosition = 'center';
                avatarEl.style.cursor = 'pointer';
                
                // Th√™m s·ª± ki·ªán click ƒë·ªÉ xem ·∫£nh l·ªõn
                avatarEl.onclick = function(e) {
                    e.stopPropagation();
                    viewAvatar();
                };
            } else {
                // Hi·ªÉn th·ªã ch·ªØ c√°i ƒë·∫ßu c·ªßa t√™n
                avatarEl.style.backgroundImage = 'none';
                const profile = userData.profile;
                if (profile.fullName) {
                    const initials = profile.fullName.split(' ').map(n => n[0]).join('').toUpperCase();
                    avatarEl.textContent = initials.substring(0, 2);
                    avatarEl.style.backgroundColor = '#ff3366';
                    avatarEl.style.color = 'white';
                    avatarEl.style.display = 'flex';
                    avatarEl.style.alignItems = 'center';
                    avatarEl.style.justifyContent = 'center';
                    avatarEl.style.cursor = 'pointer';
                    
                    avatarEl.onclick = function(e) {
                        e.stopPropagation();
                        document.getElementById('avatar-input').click();
                    };
                } else {
                    avatarEl.innerHTML = '<i class="fas fa-user"></i>';
                    avatarEl.style.backgroundColor = '#ff3366';
                    avatarEl.style.color = 'white';
                    avatarEl.style.display = 'flex';
                    avatarEl.style.alignItems = 'center';
                    avatarEl.style.justifyContent = 'center';
                    avatarEl.style.cursor = 'pointer';
                    
                    avatarEl.onclick = function(e) {
                        e.stopPropagation();
                        document.getElementById('avatar-input').click();
                    };
                }
            }
            
            // C·∫≠p nh·∫≠t overlay ƒë·ªÉ ƒë·ªïi ·∫£nh
            const avatarOverlay = document.querySelector('.avatar-overlay');
            avatarOverlay.onclick = function(e) {
                e.stopPropagation();
                document.getElementById('avatar-input').click();
            };
        }
        
        // H√†m xem ·∫£nh l·ªõn
        function viewAvatar() {
            if (userData.profile.avatar) {
                document.getElementById('avatarLarge').src = userData.profile.avatar;
                document.getElementById('avatarViewModal').style.display = 'flex';
            } else {
                document.getElementById('avatar-input').click();
            }
        }
        
        // H√†m ƒë√≥ng modal xem ·∫£nh
        function closeAvatarView() {
            document.getElementById('avatarViewModal').style.display = 'none';
        }
        
        // H√†m ƒë·ªïi avatar t·ª´ modal
        function changeAvatar() {
            closeAvatarView();
            setTimeout(() => {
                document.getElementById('avatar-input').click();
            }, 300);
        }
        
        // Setup color picker
        function setupColorPicker() {
            const colorOptions = document.querySelectorAll('.color-option');
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options
                    colorOptions.forEach(opt => opt.classList.remove('selected'));
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Update hidden input
                    const color = this.getAttribute('data-color');
                    document.getElementById('editSubjectColor').value = color;
                });
            });
            
            // Select first color by default
            if (colorOptions.length > 0) {
                colorOptions[0].classList.add('selected');
            }
        }
        
        // Load d·ªØ li·ªáu t·ª´ localStorage
        function loadData() {
            const savedData = localStorage.getItem('studyPlannerData');
            if (savedData) {
                userData = JSON.parse(savedData);
                
                // Load profile data
                if (userData.profile) {
                    document.getElementById('fullName').value = userData.profile.fullName || '';
                    document.getElementById('studentId').value = userData.profile.studentId || '';
                    document.getElementById('major').value = userData.profile.major || '';
                    document.getElementById('email').value = userData.profile.email || '';
                    document.getElementById('phone').value = userData.profile.phone || '';
                    document.getElementById('studyGoals').value = userData.profile.studyGoals || '';
                    
                    // Set priority radio
                    const priorityRadio = document.querySelector(`input[name="studyPriority"][value="${userData.profile.studyPriority || 'medium'}"]`);
                    if (priorityRadio) priorityRadio.checked = true;
                }
                
                // Update streak days
                updateStreakDays();
            } else {
                // D·ªØ li·ªáu m·∫´u n·∫øu kh√¥ng c√≥ d·ªØ li·ªáu
                initializeSampleData();
            }
        }
        
        // Kh·ªüi t·∫°o d·ªØ li·ªáu m·∫´u
        function initializeSampleData() {
            userData.subjects = [
                { 
                    id: 1, 
                    name: "To√°n cao c·∫•p", 
                    code: "MATH101", 
                    credits: 3, 
                    difficulty: "hard", 
                    color: "#ff3366",
                    teacher: "Nguy·ªÖn VƒÉn A",
                    schedule: "T2, T4 t·ª´ 8-10h",
                    description: "M√¥n h·ªçc v·ªÅ gi·∫£i t√≠ch v√† ƒë·∫°i s·ªë",
                    studyHours: 0 
                },
                { 
                    id: 2, 
                    name: "L·∫≠p tr√¨nh C++", 
                    code: "PROG101", 
                    credits: 4, 
                    difficulty: "medium", 
                    color: "#cc0044",
                    teacher: "Tr·∫ßn Th·ªã B",
                    schedule: "T3, T5 t·ª´ 14-16h",
                    description: "M√¥n h·ªçc l·∫≠p tr√¨nh c∆° b·∫£n v·ªõi C++",
                    studyHours: 0 
                },
                { 
                    id: 3, 
                    name: "Ti·∫øng Anh chuy√™n ng√†nh", 
                    code: "ENG201", 
                    credits: 2, 
                    difficulty: "easy", 
                    color: "#ff6699",
                    teacher: "L√™ VƒÉn C",
                    schedule: "T6 t·ª´ 9-11h",
                    description: "Ti·∫øng Anh cho chuy√™n ng√†nh CNTT",
                    studyHours: 0 
                }
            ];
            
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            userData.studyPlans = [
                { 
                    id: 1, 
                    subjectId: 1, 
                    date: tomorrow.toISOString().split('T')[0], 
                    startTime: "08:00", 
                    endTime: "10:00", 
                    topic: "Ch∆∞∆°ng 3 - ƒê·∫°o h√†m", 
                    priority: "high", 
                    notes: "√în t·∫≠p cho b√†i ki·ªÉm tra gi·ªØa k·ª≥", 
                    completed: false 
                },
                { 
                    id: 2, 
                    subjectId: 2, 
                    date: tomorrow.toISOString().split('T')[0], 
                    startTime: "14:00", 
                    endTime: "16:00", 
                    topic: "Con tr·ªè v√† h√†m", 
                    priority: "medium", 
                    notes: "L√†m b√†i t·∫≠p v·ªÅ nh√†", 
                    completed: false 
                }
            ];
            
            saveData();
        }
        
        // Save d·ªØ li·ªáu v√†o localStorage
        function saveData() {
            localStorage.setItem('studyPlannerData', JSON.stringify(userData));
            showMessage("D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng!", "success");
        }
        
        // Hi·ªÉn th·ªã th√¥ng b√°o
        function showMessage(text, type = "success") {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
            messageEl.style.display = 'block';
            
            setTimeout(() => {
                messageEl.style.display = 'none';
            }, 3000);
        }
        
        // C·∫≠p nh·∫≠t UI
        function updateUI() {
            // C·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi d√πng
            const profile = userData.profile;
            document.getElementById('user-name').textContent = profile.fullName || "Sinh Vi√™n";
            document.getElementById('user-id').textContent = `ID: ${profile.studentId || "STU-001"}`;
            document.getElementById('user-major').textContent = profile.major || "Ch∆∞a c·∫≠p nh·∫≠t";
            
            // C·∫≠p nh·∫≠t avatar
            updateAvatar();
            
            // C·∫≠p nh·∫≠t danh s√°ch m√¥n h·ªçc trong select
            updateSubjectSelect();
            
            // C·∫≠p nh·∫≠t danh s√°ch k·∫ø ho·∫°ch h·ªçc t·∫≠p
            updateStudyPlanList();
            
            // C·∫≠p nh·∫≠t danh s√°ch m√¥n h·ªçc
            updateSubjectsList();
            
            // C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô
            updateProgress();
            
            // C·∫≠p nh·∫≠t th·ªëng k√™
            updateStats();
            
            // C·∫≠p nh·∫≠t th·ªëng k√™ m√¥n h·ªçc
            updateSubjectStats();
            
            // C·∫≠p nh·∫≠t calendar
            generateCalendar();
        }
        
        // L∆∞u th√¥ng tin c√° nh√¢n
        function saveProfile() {
            const saveBtn = document.querySelector('#profile-tab .btn-primary');
            const originalText = saveBtn.innerHTML;
            
            // Hi·ªáu ·ª©ng loading tr√™n n√∫t
            saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ƒêang l∆∞u...';
            saveBtn.disabled = true;
            
            setTimeout(() => {
                userData.profile = {
                    fullName: document.getElementById('fullName').value,
                    studentId: document.getElementById('studentId').value,
                    major: document.getElementById('major').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    studyGoals: document.getElementById('studyGoals').value,
                    studyPriority: document.querySelector('input[name="studyPriority"]:checked').value,
                    avatar: userData.profile.avatar
                };
                
                saveData();
                updateUI();
                
                // Hi·ªáu ·ª©ng th√†nh c√¥ng
                saveBtn.innerHTML = '<i class="fas fa-check"></i> ƒê√£ l∆∞u!';
                saveBtn.style.background = '#2ecc71';
                
                setTimeout(() => {
                    saveBtn.innerHTML = originalText;
                    saveBtn.style.background = '';
                    saveBtn.disabled = false;
                }, 1500);
            }, 800);
        }
        
        // C·∫≠p nh·∫≠t select m√¥n h·ªçc
        function updateSubjectSelect() {
            const select = document.getElementById('subjectSelect');
            select.innerHTML = '<option value="">Ch·ªçn m√¥n h·ªçc</option>';
            
            userData.subjects.forEach(subject => {
                const option = document.createElement('option');
                option.value = subject.id;
                option.textContent = `${subject.name} ${subject.code ? `(${subject.code})` : ''}`;
                select.appendChild(option);
            });
        }
        
        // C·∫≠p nh·∫≠t danh s√°ch m√¥n h·ªçc trong tab Subjects
        function updateSubjectsList() {
            const container = document.getElementById('subjects-container');
            container.innerHTML = '';
            
            if (userData.subjects.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: var(--text-light);">
                        <i class="fas fa-book" style="font-size: 2em; margin-bottom: 15px; opacity: 0.5;"></i>
                        <p>Ch∆∞a c√≥ m√¥n h·ªçc n√†o. H√£y th√™m m√¥n h·ªçc ƒë·∫ßu ti√™n!</p>
                    </div>
                `;
                return;
            }
            
            userData.subjects.forEach(subject => {
                const difficultyText = subject.difficulty === 'easy' ? 'D·ªÖ' :
                                     subject.difficulty === 'medium' ? 'Trung b√¨nh' :
                                     subject.difficulty === 'hard' ? 'Kh√≥' : 'R·∫•t kh√≥';
                
                const difficultyColor = subject.difficulty === 'easy' ? 'green' :
                                      subject.difficulty === 'medium' ? 'orange' :
                                      subject.difficulty === 'hard' ? 'red' : 'darkred';
                
                const subjectItem = document.createElement('div');
                subjectItem.className = 'subject-item';
                subjectItem.style.borderLeftColor = subject.color || '#ff3366';
                
                subjectItem.innerHTML = `
                    <div class="subject-info">
                        <h4>${subject.name}</h4>
                        <p>${subject.code ? `M√£: ${subject.code} ‚Ä¢ ` : ''}T√≠n ch·ªâ: ${subject.credits} ‚Ä¢ ƒê·ªô kh√≥: 
                        <span style="color: ${difficultyColor}">${difficultyText}</span></p>
                        ${subject.teacher ? `<p><small>Gi·∫£ng vi√™n: ${subject.teacher}</small></p>` : ''}
                    </div>
                    <div class="subject-actions">
                        <button class="btn btn-secondary btn-sm" onclick="editSubject(${subject.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="deleteSubject(${subject.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                container.appendChild(subjectItem);
            });
        }
        
        // Reset form th√™m/s·ª≠a m√¥n h·ªçc
        function resetSubjectForm() {
            document.getElementById('editSubjectName').value = '';
            document.getElementById('editSubjectCode').value = '';
            document.getElementById('editSubjectCredits').value = '3';
            document.getElementById('editSubjectDifficulty').value = 'medium';
            document.getElementById('editSubjectDescription').value = '';
            document.getElementById('editSubjectTeacher').value = '';
            document.getElementById('editSubjectSchedule').value = '';
            document.getElementById('editSubjectColor').value = '#ff3366';
            
            // Reset color picker
            const colorOptions = document.querySelectorAll('.color-option');
            colorOptions.forEach(opt => opt.classList.remove('selected'));
            if (colorOptions.length > 0) {
                colorOptions[0].classList.add('selected');
            }
            
            document.getElementById('subject-form-title').textContent = 'Th√™m m√¥n h·ªçc m·ªõi';
            editingSubjectId = null;
        }
        
        // L∆∞u m√¥n h·ªçc (th√™m m·ªõi ho·∫∑c c·∫≠p nh·∫≠t)
        function saveSubject() {
            const name = document.getElementById('editSubjectName').value;
            const code = document.getElementById('editSubjectCode').value;
            const credits = parseInt(document.getElementById('editSubjectCredits').value);
            const difficulty = document.getElementById('editSubjectDifficulty').value;
            const description = document.getElementById('editSubjectDescription').value;
            const teacher = document.getElementById('editSubjectTeacher').value;
            const schedule = document.getElementById('editSubjectSchedule').value;
            const color = document.getElementById('editSubjectColor').value;
            
            if (!name) {
                showMessage("Vui l√≤ng nh·∫≠p t√™n m√¥n h·ªçc!", "error");
                return;
            }
            
            if (editingSubjectId) {
                // C·∫≠p nh·∫≠t m√¥n h·ªçc hi·ªán c√≥
                const subjectIndex = userData.subjects.findIndex(s => s.id === editingSubjectId);
                if (subjectIndex !== -1) {
                    userData.subjects[subjectIndex] = {
                        ...userData.subjects[subjectIndex],
                        name: name,
                        code: code,
                        credits: credits || 3,
                        difficulty: difficulty,
                        description: description,
                        teacher: teacher,
                        schedule: schedule,
                        color: color
                    };
                    
                    showMessage(`ƒê√£ c·∫≠p nh·∫≠t m√¥n h·ªçc "${name}" th√†nh c√¥ng!`, "success");
                }
            } else {
                // Th√™m m√¥n h·ªçc m·ªõi
                const newSubject = {
                    id: Date.now(),
                    name: name,
                    code: code,
                    credits: credits || 3,
                    difficulty: difficulty,
                    description: description,
                    teacher: teacher,
                    schedule: schedule,
                    color: color,
                    studyHours: 0
                };
                
                userData.subjects.push(newSubject);
                showMessage(`ƒê√£ th√™m m√¥n h·ªçc "${name}" th√†nh c√¥ng!`, "success");
            }
            
            saveData();
            updateUI();
            resetSubjectForm();
        }
        
        // Ch·ªânh s·ª≠a m√¥n h·ªçc
        function editSubject(subjectId) {
            const subject = userData.subjects.find(s => s.id === subjectId);
            if (!subject) return;
            
            document.getElementById('editSubjectName').value = subject.name;
            document.getElementById('editSubjectCode').value = subject.code || '';
            document.getElementById('editSubjectCredits').value = subject.credits || 3;
            document.getElementById('editSubjectDifficulty').value = subject.difficulty || 'medium';
            document.getElementById('editSubjectDescription').value = subject.description || '';
            document.getElementById('editSubjectTeacher').value = subject.teacher || '';
            document.getElementById('editSubjectSchedule').value = subject.schedule || '';
            
            // Set color picker
            const color = subject.color || '#ff3366';
            document.getElementById('editSubjectColor').value = color;
            
            const colorOptions = document.querySelectorAll('.color-option');
            colorOptions.forEach(opt => {
                opt.classList.remove('selected');
                if (opt.getAttribute('data-color') === color) {
                    opt.classList.add('selected');
                }
            });
            
            document.getElementById('subject-form-title').textContent = 'Ch·ªânh s·ª≠a m√¥n h·ªçc';
            editingSubjectId = subjectId;
            
            // Scroll to form
            document.querySelector('.subject-form').scrollIntoView({ behavior: 'smooth' });
        }
        
        // X√≥a m√¥n h·ªçc
        function deleteSubject(subjectId) {
            // Ki·ªÉm tra xem m√¥n h·ªçc c√≥ ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng trong k·∫ø ho·∫°ch kh√¥ng
            const usedInPlans = userData.studyPlans.some(p => p.subjectId === subjectId);
            
            if (usedInPlans) {
                showMessage("Kh√¥ng th·ªÉ x√≥a m√¥n h·ªçc n√†y v√¨ ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng trong k·∫ø ho·∫°ch h·ªçc t·∫≠p!", "error");
                return;
            }
            
            if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a m√¥n h·ªçc n√†y?")) {
                userData.subjects = userData.subjects.filter(s => s.id !== subjectId);
                saveData();
                updateUI();
                
                if (editingSubjectId === subjectId) {
                    resetSubjectForm();
                }
            }
        }
        
        // Th√™m k·∫ø ho·∫°ch h·ªçc t·∫≠p
        function addStudyPlan() {
            const subjectId = parseInt(document.getElementById('subjectSelect').value);
            const date = document.getElementById('studyDate').value;
            const startTime = document.getElementById('startTime').value;
            const endTime = document.getElementById('endTime').value;
            const topic = document.getElementById('studyTopic').value;
            const priority = document.querySelector('input[name="planPriority"]:checked').value;
            const notes = document.getElementById('studyNotes').value;
            
            if (!subjectId) {
                showMessage("Vui l√≤ng ch·ªçn m√¥n h·ªçc!", "error");
                return;
            }
            
            if (!date || !startTime || !endTime) {
                showMessage("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß ng√†y v√† th·ªùi gian!", "error");
                return;
            }
            
            const newPlan = {
                id: Date.now(),
                subjectId: subjectId,
                date: date,
                startTime: startTime,
                endTime: endTime,
                topic: topic,
                priority: priority,
                notes: notes,
                completed: false
            };
            
            userData.studyPlans.push(newPlan);
            
            // Reset form
            document.getElementById('studyTopic').value = '';
            document.getElementById('studyNotes').value = '';
            
            saveData();
            updateUI();
            showMessage("ƒê√£ th√™m k·∫ø ho·∫°ch h·ªçc t·∫≠p th√†nh c√¥ng!", "success");
        }
        
        // C·∫≠p nh·∫≠t danh s√°ch k·∫ø ho·∫°ch h·ªçc t·∫≠p
        function updateStudyPlanList() {
            const tbody = document.getElementById('study-plan-list');
            tbody.innerHTML = '';
            
            if (userData.studyPlans.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 30px;">
                            <p>Ch∆∞a c√≥ k·∫ø ho·∫°ch h·ªçc t·∫≠p n√†o. H√£y t·∫°o k·∫ø ho·∫°ch h·ªçc t·∫≠p m·ªõi!</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // S·∫Øp x·∫øp k·∫ø ho·∫°ch theo ng√†y v√† th·ªùi gian
            const sortedPlans = [...userData.studyPlans].sort((a, b) => {
                const dateA = new Date(a.date + ' ' + a.startTime);
                const dateB = new Date(b.date + ' ' + b.startTime);
                return dateA - dateB;
            });
            
            sortedPlans.forEach(plan => {
                const subject = userData.subjects.find(s => s.id === plan.subjectId);
                if (!subject) return;
                
                const row = document.createElement('tr');
                const priorityClass = `priority-${plan.priority}-badge`;
                const priorityText = plan.priority === 'high' ? 'Cao' : 
                                    plan.priority === 'medium' ? 'Trung b√¨nh' : 'Th·∫•p';
                
                row.innerHTML = `
                    <td><strong>${subject.name}</strong></td>
                    <td>${formatDate(plan.date)}</td>
                    <td>${plan.startTime} - ${plan.endTime}</td>
                    <td>${plan.topic || 'Kh√¥ng c√≥'}</td>
                    <td><span class="priority-badge ${priorityClass}">${priorityText}</span></td>
                    <td>
                        <input type="checkbox" ${plan.completed ? 'checked' : ''} 
                               onchange="togglePlanComplete(${plan.id})">
                        ${plan.completed ? '‚úÖ Ho√†n th√†nh' : '‚è≥ Ch∆∞a ho√†n th√†nh'}
                    </td>
                    <td>
                        <button class="btn btn-secondary" onclick="deletePlan(${plan.id})" style="padding: 5px 10px; font-size: 14px;">
                            <i class="fas fa-trash"></i> X√≥a
                        </button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }
        
        // T√≠nh gi·ªù h·ªçc cho m·ªôt m√¥n
        function calculateStudyHoursForSubject(subjectId) {
            let totalHours = 0;
            
            userData.studyPlans.forEach(plan => {
                if (plan.subjectId === subjectId && plan.completed) {
                    const start = parseTime(plan.startTime);
                    const end = parseTime(plan.endTime);
                    const hours = (end - start) / (1000 * 60 * 60);
                    totalHours += hours;
                }
            });
            
            return totalHours.toFixed(1);
        }
        
        // Parse time string to Date object
        function parseTime(timeStr) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            const date = new Date();
            date.setHours(hours, minutes, 0, 0);
            return date;
        }
        
        // C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô
        function updateProgress() {
            const container = document.getElementById('progress-container');
            container.innerHTML = '';
            
            // T√≠nh t·ªïng gi·ªù h·ªçc cho m·ªói m√¥n
            const subjectProgress = userData.subjects.map(subject => {
                const hours = parseFloat(calculateStudyHoursForSubject(subject.id));
                return {
                    name: subject.name,
                    hours: hours,
                    target: subject.credits * 10 // M·ª•c ti√™u: 10 gi·ªù/t√≠n ch·ªâ
                };
            });
            
            // Hi·ªÉn th·ªã progress bars
            subjectProgress.forEach(item => {
                const percentage = Math.min(100, (item.hours / item.target) * 100);
                
                const progressItem = document.createElement('div');
                progressItem.className = 'progress-item';
                progressItem.innerHTML = `
                    <div class="progress-label">
                        <span>${item.name}</span>
                        <span>${item.hours.toFixed(1)} / ${item.target} gi·ªù (${percentage.toFixed(1)}%)</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${percentage}%"></div>
                    </div>
                `;
                
                container.appendChild(progressItem);
            });
        }
        
        // C·∫≠p nh·∫≠t th·ªëng k√™
        function updateStats() {
            // T√≠nh t·ªïng gi·ªù h·ªçc
            let totalHours = 0;
            let completedTasks = 0;
            
            userData.studyPlans.forEach(plan => {
                if (plan.completed) {
                    completedTasks++;
                    const start = parseTime(plan.startTime);
                    const end = parseTime(plan.endTime);
                    const hours = (end - start) / (1000 * 60 * 60);
                    totalHours += hours;
                }
            });
            
            // T√≠nh hi·ªáu su·∫•t (d·ª±a tr√™n t·ªâ l·ªá ho√†n th√†nh)
            const totalPlans = userData.studyPlans.length;
            const efficiency = totalPlans > 0 ? (completedTasks / totalPlans) * 100 : 0;
            
            // T√≠nh nhi·ªám v·ª• c√≤n l·∫°i
            const pendingTasks = totalPlans - completedTasks;
            
            // C·∫≠p nh·∫≠t DOM
            document.getElementById('total-study-hours').textContent = totalHours.toFixed(1);
            document.getElementById('completed-tasks').textContent = completedTasks;
            document.getElementById('study-efficiency').textContent = efficiency.toFixed(1);
            document.getElementById('pending-tasks').textContent = pendingTasks;
            
            // C·∫≠p nh·∫≠t trong userData
            userData.settings.totalStudyHours = totalHours;
        }
        
        // C·∫≠p nh·∫≠t th·ªëng k√™ m√¥n h·ªçc
        function updateSubjectStats() {
            const totalSubjects = userData.subjects.length;
            const totalCredits = userData.subjects.reduce((sum, subject) => sum + (subject.credits || 0), 0);
            
            let hardestSubject = "Ch∆∞a c√≥";
            if (userData.subjects.length > 0) {
                const hardest = userData.subjects.reduce((prev, current) => {
                    const prevLevel = getDifficultyLevel(prev.difficulty);
                    const currentLevel = getDifficultyLevel(current.difficulty);
                    return currentLevel > prevLevel ? current : prev;
                });
                
                hardestSubject = hardest.name;
            }
            
            document.getElementById('total-subjects').textContent = totalSubjects;
            document.getElementById('total-credits').textContent = totalCredits;
            document.getElementById('hardest-subject').textContent = hardestSubject;
        }
        
        // Chuy·ªÉn ƒë·ªô kh√≥ th√†nh s·ªë
        function getDifficultyLevel(difficulty) {
            switch(difficulty) {
                case 'easy': return 1;
                case 'medium': return 2;
                case 'hard': return 3;
                case 'very-hard': return 4;
                default: return 0;
            }
        }
        
        // Toggle ho√†n th√†nh k·∫ø ho·∫°ch
        function togglePlanComplete(planId) {
            const plan = userData.studyPlans.find(p => p.id === planId);
            if (plan) {
                plan.completed = !plan.completed;
                saveData();
                updateUI();
            }
        }
        
        // X√≥a k·∫ø ho·∫°ch
        function deletePlan(planId) {
            if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a k·∫ø ho·∫°ch h·ªçc t·∫≠p n√†y?")) {
                userData.studyPlans = userData.studyPlans.filter(p => p.id !== planId);
                saveData();
                updateUI();
            }
        }
        
        // C·∫≠p nh·∫≠t streak days
        function updateStreakDays() {
            const today = new Date().toDateString();
            
            if (!userData.settings.lastLogin) {
                userData.settings.streakDays = 1;
            } else {
                const lastLogin = new Date(userData.settings.lastLogin);
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                
                if (lastLogin.toDateString() === yesterday.toDateString()) {
                    userData.settings.streakDays++;
                } else if (lastLogin.toDateString() !== today) {
                    userData.settings.streakDays = 1;
                }
            }
            
            userData.settings.lastLogin = new Date().toISOString();
            document.getElementById('streak-days').textContent = userData.settings.streakDays;
            
            // C·∫≠p nh·∫≠t gi·ªù h·ªçc h√¥m nay
            updateTodayStudyHours();
        }
        
        // C·∫≠p nh·∫≠t gi·ªù h·ªçc h√¥m nay
        function updateTodayStudyHours() {
            const today = new Date().toISOString().split('T')[0];
            let todayHours = 0;
            
            userData.studyPlans.forEach(plan => {
                if (plan.date === today && plan.completed) {
                    const start = parseTime(plan.startTime);
                    const end = parseTime(plan.endTime);
                    const hours = (end - start) / (1000 * 60 * 60);
                    todayHours += hours;
                }
            });
            
            document.getElementById('today-study').textContent = todayHours.toFixed(1);
        }
        
        // T·∫°o calendar
        function generateCalendar() {
            const monthNames = ["Th√°ng 1", "Th√°ng 2", "Th√°ng 3", "Th√°ng 4", "Th√°ng 5", "Th√°ng 6",
                              "Th√°ng 7", "Th√°ng 8", "Th√°ng 9", "Th√°ng 10", "Th√°ng 11", "Th√°ng 12"];
            
            // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ
            document.getElementById('current-month').textContent = 
                `${monthNames[currentMonth]}, ${currentYear}`;
            
            const calendarEl = document.getElementById('calendar-days');
            calendarEl.innerHTML = '';
            
            // Th√™m c√°c ng√†y trong tu·∫ßn
            const daysOfWeek = ["CN", "T2", "T3", "T4", "T5", "T6", "T7"];
            daysOfWeek.forEach(day => {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                dayEl.textContent = day;
                calendarEl.appendChild(dayEl);
            });
            
            // T√¨m ng√†y ƒë·∫ßu ti√™n c·ªßa th√°ng
            const firstDay = new Date(currentYear, currentMonth, 1);
            const startingDay = firstDay.getDay();
            
            // T√¨m ng√†y cu·ªëi c√πng c·ªßa th√°ng
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const totalDays = lastDay.getDate();
            
            // Th√™m c√°c √¥ tr·ªëng tr∆∞·ªõc ng√†y ƒë·∫ßu ti√™n
            for (let i = 0; i < startingDay; i++) {
                const emptyEl = document.createElement('div');
                emptyEl.className = 'calendar-date';
                calendarEl.appendChild(emptyEl);
            }
            
            // Th√™m c√°c ng√†y trong th√°ng
            for (let day = 1; day <= totalDays; day++) {
                const dateEl = document.createElement('div');
                dateEl.className = 'calendar-date';
                dateEl.textContent = day;
                
                // Ki·ªÉm tra xem ng√†y n√†y c√≥ k·∫ø ho·∫°ch h·ªçc t·∫≠p kh√¥ng
                const dateStr = `${currentYear}-${(currentMonth + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                const hasStudy = userData.studyPlans.some(plan => plan.date === dateStr);
                
                if (hasStudy) {
                    dateEl.classList.add('has-study');
                    dateEl.title = "C√≥ k·∫ø ho·∫°ch h·ªçc t·∫≠p";
                }
                
                // X·ª≠ l√Ω click
                dateEl.addEventListener('click', function() {
                    showStudyPlansForDate(dateStr);
                });
                
                calendarEl.appendChild(dateEl);
            }
        }
        
        // Hi·ªÉn th·ªã k·∫ø ho·∫°ch h·ªçc t·∫≠p cho m·ªôt ng√†y c·ª• th·ªÉ
        function showStudyPlansForDate(date) {
            const plans = userData.studyPlans.filter(plan => plan.date === date);
            
            if (plans.length === 0) {
                showMessage(`Kh√¥ng c√≥ k·∫ø ho·∫°ch h·ªçc t·∫≠p n√†o v√†o ng√†y ${formatDate(date)}`, "error");
                return;
            }
            
            let message = `K·∫ø ho·∫°ch h·ªçc t·∫≠p ng√†y ${formatDate(date)}:\n\n`;
            plans.forEach(plan => {
                const subject = userData.subjects.find(s => s.id === plan.subjectId);
                if (subject) {
                    message += `‚Ä¢ ${subject.name} (${plan.startTime} - ${plan.endTime}): ${plan.topic || 'Kh√¥ng c√≥ ch·ªß ƒë·ªÅ'}\n`;
                }
            });
            
            alert(message);
        }
        
        // Chuy·ªÉn ƒë·ªïi th√°ng
        function changeMonth(direction) {
            currentMonth += direction;
            
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            } else if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            
            generateCalendar();
        }
        
        // Hi·ªÉn th·ªã tab
        function showTab(tabName) {
            // ·∫®n t·∫•t c·∫£ tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Hi·ªÉn th·ªã tab ƒë∆∞·ª£c ch·ªçn
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // K√≠ch ho·∫°t tab v√† nav link t∆∞∆°ng ·ª©ng
            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
            document.querySelector(`.nav-menu a[data-tab="${tabName}"]`).classList.add('active');
            
            // Th√™m c√¢u n√≥i c·ªï v≈© m·ªõi khi chuy·ªÉn tab
            if (Math.random() > 0.7) {
                showRandomMotivationalQuote();
            }
        }
        
        // Xu·∫•t d·ªØ li·ªáu
        function exportData() {
            const dataStr = JSON.stringify(userData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `study-planner-data-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showMessage("D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c xu·∫•t th√†nh c√¥ng!", "success");
        }
        
        // Nh·∫≠p d·ªØ li·ªáu
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(event) {
                const file = event.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        userData = importedData;
                        saveData();
                        updateUI();
                        showMessage("D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c nh·∫≠p th√†nh c√¥ng!", "success");
                    } catch (error) {
                        showMessage("L·ªói khi ƒë·ªçc file. Vui l√≤ng ki·ªÉm tra ƒë·ªãnh d·∫°ng file!", "error");
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // ƒê·∫∑t l·∫°i d·ªØ li·ªáu
        function resetData() {
            if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒë·∫∑t l·∫°i t·∫•t c·∫£ d·ªØ li·ªáu? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!")) {
                localStorage.removeItem('studyPlannerData');
                userData = {
                    profile: {
                        avatar: null
                    },
                    subjects: [],
                    studyPlans: [],
                    progress: {},
                    settings: {
                        lastLogin: null,
                        streakDays: 0,
                        totalStudyHours: 0
                    }
                };
                
                // Reset form
                document.getElementById('fullName').value = '';
                document.getElementById('studentId').value = '';
                document.getElementById('major').value = '';
                document.getElementById('email').value = '';
                document.getElementById('phone').value = '';
                document.getElementById('studyGoals').value = '';
                
                updateUI();
                showRandomMotivationalQuote();
                showMessage("ƒê√£ ƒë·∫∑t l·∫°i d·ªØ li·ªáu th√†nh c√¥ng!", "success");
            }
        }
        
        // Format date
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('vi-VN');
        }
        
        // Hi·ªÉn th·ªã modal th√™m m√¥n h·ªçc nhanh
        function showQuickAddSubject() {
            document.getElementById('quickAddModal').style.display = 'flex';
        }
        
        // ·∫®n modal th√™m m√¥n h·ªçc nhanh
        function hideQuickAddModal() {
            document.getElementById('quickAddModal').style.display = 'none';
            document.getElementById('quickSubjectName').value = '';
            document.getElementById('quickSubjectCode').value = '';
        }
        
        // Th√™m m√¥n h·ªçc nhanh v√† ch·ªçn n√≥
        function addQuickSubject() {
            const name = document.getElementById('quickSubjectName').value;
            const code = document.getElementById('quickSubjectCode').value;
            
            if (!name) {
                showMessage("Vui l√≤ng nh·∫≠p t√™n m√¥n h·ªçc!", "error");
                return;
            }
            
            const newSubject = {
                id: Date.now(),
                name: name,
                code: code,
                credits: 3,
                difficulty: "medium",
                color: "#ff3366",
                studyHours: 0
            };
            
            userData.subjects.push(newSubject);
            saveData();
            updateUI();
            
            // Ch·ªçn m√¥n h·ªçc v·ª´a th√™m
            document.getElementById('subjectSelect').value = newSubject.id;
            
            hideQuickAddModal();
            showMessage(`ƒê√£ th√™m v√† ch·ªçn m√¥n h·ªçc "${name}"`, "success");
        }
    </script>
</body>
</html>